!async function(){let t=new DOMParser;const e={a:5e3,b:5e3,c:5e3,d:5e3,e:3e3,f:3e3,g:3e3,h:0,i:0,j:0,k:3e3,none:0},n=[[0,50],[0,49],[1,49],[2,49],[0,48],[1,48],[2,48],[3,48],[4,48],[5,48]].map((([n,a])=>function(n,a){return fetch(n).then((t=>t.arrayBuffer())).then((t=>new TextDecoder("Shift_JIS").decode(t))).then((e=>t.parseFromString(e,"text/html"))).then((t=>t.querySelectorAll("ul.mu_list_table > li"))).then((t=>Array.from(t).filter((t=>t.firstElementChild.className.startsWith("col"))).map((t=>[t.children[3].textContent,t.children[3].firstChild.src.replace("https://eacache.s.konaminet.jp/game/popn/peace/p/images/p/common/medal/meda_","").replace(".png",""),t.firstElementChild.lastElementChild.textContent,t.firstElementChild.firstElementChild.textContent])).map((([t,n,l,d])=>(console.log({song:d,score:t,medal:n}),{song:d,genre:l,score:t,medal:n,level:a,point:t<5e4?0:Math.floor(100*(1e4*a+parseInt(t)-5e4+e[n])/5440)/100})))))}(`https://p.eagate.573.jp/game/popn/peace/p/playdata/mu_lv.html?page=${n}&level=${a}`,a))),a=await fetch("https://p.eagate.573.jp/game/popn/peace/p/playdata/index.html").then((t=>t.arrayBuffer())).then((t=>new TextDecoder("Shift_JIS").decode(t))).then((e=>t.parseFromString(e,"text/html"))).then((t=>t.querySelector("#status_table > div.st_box > div:nth-child(2)").textContent)),l=(await Promise.all(n)).flat().sort(((t,e)=>e.point-t.point)).slice(0,50),d=l.reduce(((t,e)=>t+e.point),0)/50,i=document.createElement("div");i.id="pokkura",i.innerHTML=`\n  <style scoped>\n  .pokura {\n    display: flex;\n    justify-content: center;\n  }\n  .pokuraTable {\n    background-color: #feffb7;\n    border-collapse: collapse;\n  }\n  .pokuraTable:first-child {\n    margin-right: 10px;\n  }\n  .pokuraTable tr {\n    border-bottom: 2px solid #d82f66;\n  }\n  .pokuraTable th {\n    padding: 4px;\n  }\n  .pokuraTable td {\n    padding: 0 4px;\n  }\n  .pokuraTable td img {\n    vertical-align: middle;\n  }\n  .profileTable {\n    margin: 10px auto;\n    font-size: 14px;\n  }\n  .profileTable td {\n    padding: 5px;\n  }\n  .profileTable td:first-child {\n    font-weight: bold;\n  }\n  @media (max-width: 768px) {\n    .pokura {\n      flex-direction: column;\n    }\n    .pokuraTable {\n      width: 100%;\n      margin-bottom: 20px;\n    }\n    .profileTable {\n      width: auto;\n    }\n    .pokuraTable th:first-child,td:first-child {\n      min-width: 20px;\n    }\n    .pokuraTable th:nth-child(4),td:nth-child(4) {\n      min-width: 40px;\n    }\n    .pokuraTable th:nth-child(5),td:nth-child(5) {\n      min-width: 40px;\n    }\n    .pokuraTable th:nth-child(6),td:nth-child(6) {\n      min-width: 50px;\n    }\n  }\n  </style>\n  <table class="pokuraTable profileTable"><tr><td>プレーヤー名</td><td>${a}</td></tr><tr><td>ポックラ</td><td>${d.toFixed(2)}</td></tr></table>\n  <div class="pokura">\n  <table class="pokuraTable">\n    <tr><th>LV</th><th>ジャンル</th><th>曲名</th><th>スコア</th><th>メダル</th><th>ポックラ</th></tr>\n    ${l.slice(0,25).map((t=>`<tr><td>${t.level}</td><td>${t.genre}</td><td>${t.song}</td><td>${t.score}</td><td><img src="https://eacache.s.konaminet.jp/game/popn/peace/p/images/p/common/medal/meda_${t.medal}.png"></td><td>${t.point.toFixed(2)}</td></tr>`)).join("")}\n  </table>\n  <table class="pokuraTable">\n    <tr><th>LV</th><th>ジャンル</th><th>曲名</th><th>スコア</th><th>メダル</th><th>ポックラ</th></tr>\n    ${l.slice(25).map((t=>`<tr><td>${t.level}</td><td>${t.genre}</td><td>${t.song}</td><td>${t.score}</td><td><img src="https://eacache.s.konaminet.jp/game/popn/peace/p/images/p/common/medal/meda_${t.medal}.png"></td><td>${t.point.toFixed(2)}</td></tr>`)).join("")}\n  </table></div>`,document.body.innerHTML="",document.body.appendChild(i)}();